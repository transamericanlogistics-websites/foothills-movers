<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="shortcut icon" type="image" href="favicon.webp">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/animation.css">
  <link rel="stylesheet" href="/assets/css/100_canadian.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  {% include nav.html %}
  {{ content }}
  {% include footer.html %}
  
  <script>
  (function () {
    // Create the canvas and overlay it on the whole page
    var canvas = document.createElement('canvas');
    canvas.id = 'snow-canvas';
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.width = '100vw';
    canvas.style.height = '100vh';
    canvas.style.pointerEvents = 'none'; // don't block clicks
    canvas.style.zIndex = '9999';
    document.body.appendChild(canvas);
  
    var ctx = canvas.getContext('2d');
  
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
  
    var flakes = [];
    var flakeCount = 200;
  
    function createFlakes() {
      flakes = [];
      for (var i = 0; i < flakeCount; i++) {
        flakes.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          r: 1 + Math.random() * 3,
          d: 1 + Math.random() * 2,    // speed factor
          tilt: Math.random() * 2 * Math.PI
        });
      }
    }
  
    function drawFlakes() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
      ctx.beginPath();
      for (var i = 0; i < flakeCount; i++) {
        var f = flakes[i];
        ctx.moveTo(f.x, f.y);
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
      }
      ctx.fill();
      updateFlakes();
      requestAnimationFrame(drawFlakes);
    }
  
    var angle = 0;
    function updateFlakes() {
      angle += 0.01;
      for (var i = 0; i < flakeCount; i++) {
        var f = flakes[i];
        // Fall down
        f.y += Math.cos(angle + f.d) + 1 + f.d * 0.5;
        // Drift sideways a bit
        f.x += Math.sin(angle) * 0.5;
  
        // If the snowflake goes below the screen, respawn it at the top
        if (f.y > canvas.height) {
          flakes[i] = {
            x: Math.random() * canvas.width,
            y: -10,
            r: 1 + Math.random() * 3,
            d: 1 + Math.random() * 2,
            tilt: Math.random() * 2 * Math.PI
          };
        }
        // Wrap around horizontally
        if (f.x > canvas.width) f.x = 0;
        if (f.x < 0) f.x = canvas.width;
      }
    }
  
    createFlakes();
    drawFlakes();
  })();
  </script>

</body>
</html>
